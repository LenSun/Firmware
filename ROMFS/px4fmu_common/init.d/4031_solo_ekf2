#!nsh
#
# @name Frankensolo
#
# @type Quadrotor x
#
# @maintainer Paul Riseborough <paul@live.com.au>
#

# Solo for ekf2 testing with iMX6 removed and replaced with frsky receiver and 3DR 915 MHz modem

sh /etc/init.d/rc.mc_defaults

if [ $AUTOCNF == yes ]
then
    # estimator
    param set SYS_MC_EST_GROUP  2

    # tuning
    param set MC_PITCHRATE_P    0.11
    param set MC_ROLLRATE_P     0.11
    param set MPC_MANTHR_MIN    0.08
    param set MPC_XY_VEL_MAX    3.0
    param set MPC_Z_VEL_MAX     2.0

    # takeoff, land and RTL settings
    param set MIS_TAKEOFF_ALT   4.0
    param set COM_DISARM_LAND   1
    param set RTL_LAND_DELAY    1
    param set RTL_DESCEND_ALT   5.0
    param set RTL_RETURN_ALT    15.0
    param set MPC_TILTMAX_LND   8.0
    param set MPC_LAND_SPEED    0.4
    param set MPC_HOLD_MAX_Z    1.5
    param set MPC_TKO_JMPSPD    2.0
    param set MPC_TKO_SPEED     1.5

    # setup
    # main board rotation: pitch 180
    param set SENS_BOARD_ROT    12
    # solo external mag rotation
    param set CAL_MAG0_ROT      30
    # no safety switch
    param set CBRK_IO_SAFETY    22027
    # battery voltage not available yet
    param set CBRK_SUPPLY_CHK   894281

fi

set MIXER solo

set PWM_OUT 1234
set MIXER_AUX none
